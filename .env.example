# Cyberfly Node Environment Configuration
# Copy this file to .env and configure as needed

# ============================================
# REQUIRED: Kadena Configuration
# ============================================
KADENA_ACCOUNT=your-kadena-account

# ============================================
# MQTT Configuration
# ============================================
MQTT_HOST=mqtt://localhost
# MQTT_HOST=mqtt://broker.example.com

# ============================================
# Bridge Configuration
# ============================================

# Message Handling
# Time (in ms) to keep message hash for duplicate detection
BRIDGE_MESSAGE_TTL=5000

# Maximum message size in bytes (1MB default)
# Adjust based on your use case:
# - IoT devices: 262144 (256KB)
# - General: 1048576 (1MB)
# - Large payloads: 5242880 (5MB)
BRIDGE_MAX_MESSAGE_SIZE=1048576

# Bridge Components (Default: ENABLED)
# Both bridges are ENABLED by default if these variables are not set
# Only set these to 'false' if you want to explicitly DISABLE a bridge
# BRIDGE_ENABLE_MQTT=false
# BRIDGE_ENABLE_SOCKET=false

# MQTT Quality of Service
# 0 = At most once (fastest, no guarantee)
# 1 = At least once (reliable, may duplicate)
# 2 = Exactly once (slowest, no duplicates)
BRIDGE_MQTT_QOS=0

# ============================================
# Logging Configuration
# ============================================

# Log Level
# debug = Verbose logging, all message details
# info = Normal operations, state changes
# warn = Warnings, degraded performance
# error = Errors only
LOG_LEVEL=info

# ============================================
# Error Handling & Recovery
# ============================================

# Circuit Breaker Configuration
# Number of consecutive failures before opening circuit
BRIDGE_CIRCUIT_BREAKER_THRESHOLD=10

# Time (in ms) before attempting recovery after circuit opens
# 60000 = 1 minute
# 30000 = 30 seconds
# 120000 = 2 minutes
BRIDGE_CIRCUIT_BREAKER_TIMEOUT=60000

# ============================================
# Security & Filtering
# ============================================

# Topic Blacklist
# Comma-separated list of topic patterns to block from bridging
# Example: admin,system,internal,config
BRIDGE_TOPIC_BLACKLIST=

# ============================================
# Example Configurations by Use Case
# ============================================

# --- High Throughput (Performance Optimized) ---
# BRIDGE_MESSAGE_TTL=3000
# BRIDGE_MAX_MESSAGE_SIZE=524288
# BRIDGE_MQTT_QOS=0
# LOG_LEVEL=warn
# BRIDGE_CIRCUIT_BREAKER_THRESHOLD=20

# --- High Reliability (Fault Tolerance) ---
# BRIDGE_MESSAGE_TTL=10000
# BRIDGE_MAX_MESSAGE_SIZE=1048576
# BRIDGE_MQTT_QOS=1
# LOG_LEVEL=info
# BRIDGE_CIRCUIT_BREAKER_THRESHOLD=15
# BRIDGE_CIRCUIT_BREAKER_TIMEOUT=30000

# --- Resource Constrained (Low Memory) ---
# BRIDGE_MESSAGE_TTL=2000
# BRIDGE_MAX_MESSAGE_SIZE=131072
# BRIDGE_MQTT_QOS=0
# LOG_LEVEL=error
# BRIDGE_CIRCUIT_BREAKER_THRESHOLD=5

# --- Development (Debugging) ---
# BRIDGE_MESSAGE_TTL=10000
# LOG_LEVEL=debug
# BRIDGE_CIRCUIT_BREAKER_THRESHOLD=5
# BRIDGE_CIRCUIT_BREAKER_TIMEOUT=10000
